body {
        font-family: Arial, sans-serif;
        --color-1: #2a2438; 
        --color-2: #352f44; 
        --color-3: #5c5470; 
        --color-4: #dbd8e3; 

        --background: var(--color-1); 
        --above: var(--color-2); 
        --text-faint: var(--color-3); 
        --text: var(--color-4); 
        --accent: hsl(331.8, 91.3%, 45%);
        --accent-above: hsl(331.8, 91.3%, 55%);
        --warn: #e08067;

        background: var(--background);
        color: var(--text);
}

#main > nav,
.links.links {
        display: flex;
        gap: 4px;
}

a {
        color: currentColor;
        text-decoration-color: transparent;

        &:hover {
                text-decoration-color: currentColor;
        }
        &:focus-ring {
                text-decoration-color: currentColor;
        }
}


ul {
        margin-top: 0;
        padding-left: 1em;
}

nav > a {
        padding: 4px;
        background: var(--above);
}

.row {
        display: flex;
        align-items: baseline;
        justify-content: space-between;
        gap: 8px;

        h1 {
                flex: 1;
        }
}

.actions {
        display: none;
        gap: 8px;
}

a.btn,
button {
        appearance: none;
        padding: 4px 8px;
        border: none;
        border-radius: 2px;
        font-size: inherit;
        color: var(--text);
        background: var(--above);
        cursor: pointer;

        &[data-prompt] {
                color: var(--warn);
        }

        &.link {
                diplay: inline;
                padding: 0;
                background: transparent;
                text-align: left;

                &&:hover {
                        background: transparent;
                        text-decoration: underline;
                }

                &:has(+ .link)::after {
                        content: ", ";
                        display: inline-block;
                        padding-right: 4px;
                }
        }

        &.icon,
        &:has(> img:only-child) {
                padding: 4px;
                width: 28px;
                height: 28px;
                background: transparent;
                
                img {
                        width: 20px;
                        height: 20px;
                }
        }

        &&:hover {
                background: var(--color-3);
        }
        &&:focus-ring {
                background: var(--color-3);
        }
}

form {
        
        textarea {
                appearance: none;
                padding: 4px 8px;
                border: none;
                border-radius: 2px;
                font-size: inherit;
                color: var(--text);
                background: var(--above);
                width: max(220px, 20vw);

                &:focus {
                        background: var(--color-3);
                        outline: 2px solid var(--accent);
                }
        }
        input[type=text] {
                appearance: none;
                padding: 4px 8px;
                border: none;
                border-radius: 2px;
                font-size: inherit;
                color: var(--text);
                background: var(--above);
                width: max(220px, 20vw);

                &:focus {
                        background: var(--color-3);
                        outline: 2px solid var(--accent);
                }
        }
        input[type=number] {
                appearance: none;
                padding: 4px 8px;
                border: none;
                border-radius: 2px;
                font-size: inherit;
                color: var(--text);
                background: var(--above);
                width: 40px;

                &:focus {
                        background: var(--color-3);
                        outline: 2px solid var(--accent);
                }
        }

        button[is="clear-button"] {
                position: absolute;
                display: none;
                margin-top: 4px;
                margin-left: -4px;
                transform: translateX(-100%);
                align-items: center;
                justify-content: center;
                width: 20px;
                height: 20px;
                border-radius: 50%;
                font-size: inherit;
                color: var(--text);
                cursor: pointer;

                &::after {
                  content: "тип";
                  transform: translateY(-2px);
                }

                &:hover {
                        background: var(--color-3);
                }
                &:focus-ring {
                        background: var(--color-3);
                }
        }

        &.page {
                display: flex;
                flex-direction: column;
                gap: 16px;

                label {
                        display: flex;

                        span {
                                display: inline-block;
                                width: 140px;
                        }
                }
        }
}

select {
        appearance: base-select;
        border: none;
        padding: 2px 4px;
        background: var(--above);
        color: var(--text);
        border-radius: 2px;
}

summary {
        cursor: pointer;
        user-select: none;
}

.table_options {
        display: flex;
        gap: 16px;
}

.option_group {
        display: flex;
        gap: 4px;

        & > div {
                display: flex;
                gap: 4px;
                flex-wrap: wrap;
        }

        label {
                padding: 2px 4px;
                background: var(--above);
                border-radius: 2px;
                &:has(:checked) {
                        background: var(--accent);
                }
        }

        input {
                display: none;
        }
}

.pagination {
        position: sticky;
        bottom: 0;
        display: grid;
        grid-template-columns: min-content min-content auto min-content min-content;
        align-items: center;
        justify-content: center;
        gap: 8px;
        padding: 8px;
        border-top: 1px solid currentColor;
        background: var(--background);

        > div {
                display: flex;
                gap: 4px;
        }
        a {
                display: flex;
                align-items: center;
                justify-content: center;
                width: 30px;
                height: 30px;
                padding: 4px;
                background: var(--above);
                border-radius: 50%;

                &:hover {
                        text-decoration: none;
                        background: var(--color-3);
                }
                &:focus-ring {
                        text-decoration: none;
                        background: var(--color-3);
                }
        }
        .active {
                background: var(--accent);

                &:hover {
                        background: var(--accent-above);
                }
                &:focus-ring {
                        background: var(--accent-above);
                }
        }
        .disabled {
                color: var(--color-3);
                background: var(--above) !important;
        }
}

.table {
        display: grid;
        --alternate: var(--above);
        word-break: break-word;

        & > .header, & > div {
                display: block;
                padding: 4px;
        }

        & > .header {
                position: sticky;
                top: 0;
                font-weight: bold;
                border-bottom: 1px solid currentColor;
                background: var(--background);
        }
}

.table2 {
        --alternate: var(--above);
        word-break: break-word;

        &.MaMTorrentsTable {
                margin: 0 -8px;
        }

        &.MaMTorrentsTable > div {
                grid-template-columns: 72px 54px 1fr 32px 84px 130px 64px;

                & > div {
                        padding: 8px 4px;
                }
                & > div:nth-child(1n+4) {
                        text-align: center;
                }
                & > div:first-of-type {
                        padding-left: 12px;
                }
                & > div:last-of-type {
                        text-align: right;
                        padding-right: 12px;
                }
        }

        & > div {
                display: grid;

                &&&:first-of-type {
                        align-items: end;
                        background: var(--background);
                }
                &:nth-child(even) {
                        background: var(--alternate);
                }

                & > .header, & > div {
                        display: block;
                        padding: 4px;
                }

                & > .header {
                        position: sticky;
                        top: 0;
                        font-weight: bold;
                        border-bottom: 1px solid currentColor;
                        background: var(--background);
                }
        }

        &:not(.nohover) > div:hover {
                background: var(--color-3);
        }
}

.TorrentsTable > .torrents-grid-row {
        grid-template-columns: var(--torrents-grid);
}

.TorrentsTable.is-refreshing {
        position: relative;
}

.TorrentsTable.is-refreshing > .torrents-grid-row {
        animation: stale-table-fade 500ms ease 500ms forwards;
}

.stale-refresh-overlay {
        position: absolute;
        inset: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        pointer-events: none;
        opacity: 0;
        animation: stale-overlay-reveal 1ms linear 1000ms forwards;
}

.stale-refresh-spinner {
        width: 36px;
        height: 36px;
        border: 3px solid var(--color-3);
        border-top-color: var(--accent);
        border-radius: 50%;
        animation: stale-spinner-spin 900ms linear infinite;
}

@keyframes stale-table-fade {
        from {
                opacity: 1;
        }
        to {
                opacity: 0;
        }
}

@keyframes stale-overlay-reveal {
        to {
                opacity: 1;
        }
}

@keyframes stale-spinner-spin {
        to {
                transform: rotate(360deg);
        }
}

.list_item {
        display: grid;
        grid-template-columns: auto 1fr;
        margin: 24px;
        gap: 16px;

        img {
                width: 64px;
        }
        h3 {
                margin: 0;
        }
        p {
                margin: 0.5em 0;
        }
        .author {
                margin-top: 0;
                font-style: italic;
        }
}

.torrent {
        font-weight: bold;
}

.faint {
        opacity: 0.8;
}
.missing {
        color: var(--warn);
}
.warn {
        color: var(--warn);
}

.configbox {
        font-family: monospace;

        h3 {
                margin-bottom: 0;
        }
        h4 {
                margin-bottom: 0;
        }
        .string {
                color: #b5bd68;
        }
        .num {
                color: #de935f;
        }
}

.infoboxes {
        display: flex;
        flex-wrap: wrap;
        gap: 16px;
        max-width: min(932px, 100%);

        .infobox {
                width: min(300px, 100%);
        }
}

.item {
        display: inline-block;
        margin: 2px 0;
        padding: 2px 4px;
        border-radius: 4px;
        background-color: #aa86b72e;

        & + & {
                margin-left: 4px;
        }
}

.loading-indicator {
        display: inline-block;
        padding: 4px 8px;
        margin-bottom: 8px;
        font-style: italic;
        color: var(--text-faint);
        background: var(--above);
        border-radius: 2px;
}

.torrent-detail-grid {
        display: grid;
        grid-template-columns: 1fr 2fr;
        grid-template-areas:
                "side main"
                "side description"
                "below below";
        gap: 1em;
}

.torrent-side {
        grid-area: side;
}

.torrent-main {
        grid-area: main;
}

.torrent-description {
        grid-area: description;
}

.torrent-below {
        grid-area: below;
}

.metadata-table {
        display: grid;
        grid-template-columns: auto 1fr;
        gap: 0.5em;
}

.metadata-table dt {
        font-weight: bold;
}

.metadata-table dd {
        margin: 0;
}

.pill {
        display: inline-block;
        padding: 0.2em 0.5em;
        margin: 0.2em;
        background: var(--above);
        border-radius: 4px;
}

.torrent-detail-page .btn {
        display: inline-block;
        border: 1px solid var(--color-3);
        text-decoration: none;
}

.torrent-detail-page .option_group {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5em;
        align-items: center;
}

.torrent-detail-page .option_group label {
        display: flex;
        align-items: center;
        gap: 0.3em;
}

.torrent-detail-page .option_group input {
        display: inline;
}

@media (max-width: 768px) {
        .torrent-detail-grid {
                grid-template-columns: 1fr;
                grid-template-areas:
                        "main"
                        "side"
                        "description"
                        "below";
        }
}

.search-page .search-controls {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        align-items: center;
        margin-bottom: 8px;
}

.search-page .search-controls input[type="text"],
.search-page .search-controls input[type="number"] {
        width: max(220px, 20vw);
}

.Torrents {
    --alternate: var(--above);
    word-break: break-word;

    &.Torrents {
        margin: 0 -8px;
    }

    .TorrentRow {
        grid-template-areas: "category icons main download files uploaded stats";
        grid-template-columns: 64px 54px 1fr 32px 84px 130px 72px;
        gap: 4px;
        padding: 4px 8px;

        @media (max-width: 750px) {
            grid-template-areas: "category main main" "icons main main" "icons files stats" "icons uploaded uploaded";
            grid-template-columns: 64px 1fr auto;
            grid-template-rows: auto auto auto auto;
        }

        &>div {
            padding: 4px;
            overflow: hidden;
        }

        &>div:nth-child(n+2):nth-child(-n+6) {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        &>div:nth-child(n+4):nth-child(-n+6) {
            @media (max-width: 750px) {
                flex-direction: row;
            }
        }

        &>div:nth-child(1n+4) {
            text-align: center;
        }

        &>div:last-of-type {
            .icon-row {
                justify-content: end;
            }
        }

        .media-icon {
                width: 48px;
        }
    }

    &>div {
        display: grid;

        &&&:first-of-type {
            /* align-items: end; */
            background: var(--background);
        }

        &:nth-child(even) {
            background: var(--alternate);
        }

        &>.header,
        &>div {
            display: block;
            padding: 4px;
        }

        &>.header {
            position: sticky;
            top: 0;
            font-weight: bold;
            border-bottom: 1px solid currentColor;
            background: var(--background);
        }
    }

    &:not(.nohover, .Torrents)>div:hover {
        background: var(--color-3);
    }
}


.CategoryPills {
    display: flex;
    flex-wrap: wrap;
    gap: 4px;
}

.CategoryPill {
    display: inline-block;
    padding: 2px 4px;
    border: 2px solid var(--color-3);
    border-radius: 10px;

    &.old {
        background-color: var(--color-3);
    }
}

.TorrentIcons {
    display: flex;
    flex-wrap: wrap;
    gap: 4px;

    img {
        width: 20px;
        height: 20px;
    }
}

.icon-row {
    display: flex;
    align-items: center;
    gap: var(--spacing, 4px);

    &>span:has(svg) {
        display: contents;
    }
}

